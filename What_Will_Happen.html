<!DOCTYPE html>
<html lang="en">
<head>

    <link rel="icon" type="image/png" sizes="32x32" href="img/logo.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/logo.png">

    <link rel="shortcut icon" href="img/logo.png" type="image/png">

    <link rel="apple-touch-icon" sizes="180x180" href="img/logo.png">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Impact - Analysis</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;900&family=Exo+2:wght@300;400;500;600;700&family=Audiowide&display=swap" rel="stylesheet">
    <link href="tooplate-neural-style.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

    <style>
        /* ==================================================
        MODIFICATIONS POUR LE CONTENU PRINCIPAL MASQUÉ (Ajouté)
        ================================================== */
        
        /* Le contenu principal (navbar + main + footer) */
        #navbar, #main-content, .footer-bottom {
            opacity: 0;
            visibility: hidden;
            transition: opacity 1s ease, visibility 0s linear 1s; /* Délai pour visibility */
        }
        
        /* Classe pour rendre le contenu principal visible après la fermeture du modal */
        .content-visible #navbar,
        .content-visible #main-content,
        .content-visible .footer-bottom {
            opacity: 1;
            visibility: visible;
            transition: opacity 1s ease, visibility 0s;
        }

        /* ==================================================
        Styles pour la slide d'introduction (Modal) (Ajouté)
        ================================================== */
        
        /* Le conteneur modal en plein écran */
        #intro-slide-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            overflow: hidden;
            
            visibility: hidden;
            opacity: 0;
            transition: background-color 0.4s ease, visibility 0s linear 0.6s, opacity 0.6s ease;
            pointer-events: none;
        }

        /* État du modal ouvert */
        #intro-slide-modal.show {
            background-color: rgba(0, 0, 0, 0.95);
            visibility: visible;
            opacity: 1;
            transition: background-color 0.4s ease, visibility 0s linear, opacity 0.6s ease;
            pointer-events: auto;
        }

        /* Conteneur de l'image : DÉMARRAGE DE L'ANIMATION */
        .modal-content-wrapper {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            
            transform: translateX(-100%);
            opacity: 0;
            
            transition: none;
        }
        
        /* Déclenchement de l'animation d'ouverture */
        .modal-content-wrapper.loaded {
            transform: translateX(0);
            opacity: 1;
            
            transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 0.4s ease-out;
        }

        /* État "fermeture" du contenu : se déplace vers la droite */
        #intro-slide-modal.closing .modal-content-wrapper {
            transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 0.4s ease-out;
            transform: translateX(100%);
            opacity: 0;
        }
        
        /* L'image elle-même */
        .modal-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            box-shadow: 0 0 50px rgba(0, 255, 255, 0.5);
            border: 2px solid #00ffff;
        }

        /* Bouton de fermeture */
        .close-btn {
            position: absolute;
            top: 90px;
            left: 20px;
            color: #ffffff;
            font-size: 35px;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            cursor: pointer;
            z-index: 1010;
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #00ffff;
            border-radius: 50%;
            width: 55px;
            height: 55px;
            display: flex;
            justify-content: center;
            align-items: center;
            line-height: 1;
            transition: background 0.3s, color 0.3s, transform 0.2s, box-shadow 0.3s;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.7);
        }

        .close-btn:hover {
            background: #00ffff;
            color: #0a141e;
            transform: scale(1.1);
            box-shadow: 0 0 20px #00ffff;
        }
        
        /* Responsive pour le bouton de fermeture sur petit écran */
        @media (max-width: 500px) {
            .close-btn {
                top: 15px;
                left: 15px;
                width: 45px;
                height: 45px;
                font-size: 25px;
            }
        }
        
        /* Styles de la page originale (non modifiés) */
        .presentation-text-container { max-width: 950px; margin: 100px auto 50px auto; padding: 30px; background-color: rgba(10,20,30,0.7); border-left: 5px solid #00ffff; color: #e0ffff; line-height: 1.6; font-family: 'Exo 2', sans-serif; box-shadow: 0 0 15px rgba(0,255,255,0.3); text-align: justify; }
        .presentation-text-container h3 { text-align:center; margin-bottom:30px; }
        .presentation-text-container h4 { color:#00ffff; font-family:'Orbitron', sans-serif; margin-top:20px; margin-bottom:15px; text-align:left; border-bottom:1px dashed rgba(0,255,255,0.3); padding-bottom:5px; }
        .presentation-text-container p { margin-bottom:25px; }
        .form-row { display:flex; gap:25px; margin-bottom:10px; }
        .form-field-group { flex:1; margin-bottom:15px; }
        .form-field-group label { display:block; margin-bottom:8px; font-weight:500; color:#00ffff; font-family:'Orbitron',sans-serif; font-size:0.95em; }
        .form-field-group input[type="number"], .form-field-group input[type="text"], .form-field-group select { width:100%; padding:12px 10px; box-sizing:border-box; border:1px solid #00ffff; background-color:rgba(0,0,0,0.7); color:#e0ffff; border-radius:6px; font-family:'Exo 2',sans-serif; transition:border-color 0.3s, box-shadow 0.3s; }
        .form-field-group input:focus, .form-field-group select:focus { outline:none; border-color:#4dffff; box-shadow:0 0 10px rgba(0,255,255,0.8); }
        #map { height:400px; width:100%; border:3px solid #00ffff; box-shadow:0 0 15px rgba(0,255,255,0.8); border-radius:8px; margin-top:30px; margin-bottom:30px; }
        #impactForm .submit-button { width:100%; padding:15px; background:#00ffff; color:#0d1a26; border:none; border-radius:8px; cursor:pointer; font-family:'Orbitron',sans-serif; font-weight:700; font-size:1.1em; letter-spacing:1px; transition: background 0.3s, box-shadow 0.3s, transform 0.1s; }
        #impactForm .submit-button:hover { background:#4dffff; box-shadow:0 0 20px #00ffff; transform:translateY(-2px); }
        #impact-result-box { margin-top:25px; padding:15px; border:1px solid #ffcc00; background-color: rgba(255,204,0,0.1); color:#ffcc00; text-align:center; border-radius:6px; font-family:'Orbitron',sans-serif; box-shadow:0 0 10px rgba(255,204,0,0.5); opacity:0; transform:translateY(10px); transition: all 0.4s ease; }
        #impact-result-box.show { opacity:1; transform:translateY(0); }
        .leaflet-control-zoom-in, .leaflet-control-zoom-out { color:#00ffff !important; background-color: rgba(10,20,30,0.8) !important; border:1px solid #00ffff !important; border-radius:4px !important; }
        .leaflet-control-attribution a { color:#80ffff; }
        @media(max-width:600px){ .form-row { flex-direction:column; gap:0; } .form-field-group { margin-bottom:20px; } .presentation-text-container { max-width:100%; margin:80px 10px 50px 10px; padding:20px; } }

    </style>
</head>
<body class="content-hidden">
<canvas id="neural-bg"></canvas>

    <div id="intro-slide-modal">
        <button class="close-btn" onclick="closeIntroSlide()">&times;</button>
        <div class="modal-content-wrapper">
            <img src="img/slide4.png" alt="Introduction Slide" class="modal-image">
        </div>
    </div>

<nav id="navbar">
<div class="nav-container">
<a href="#home" class="logo-container">
<img src="img/logo.png" alt="Description du logo" style="width:10%; margin-top:-10px;">
<span class="logo-text">Impact</span>
</a>
<div class="mobile-menu-toggle" id="mobile-toggle"><span></span><span></span><span></span></div>
<div class="nav-menu" id="nav-menu">
<ul>
<li><a href="index.html">Presentation</a></li>
<li><a href="science_applied.html">Science Based</a></li>
<li><a href="simulation.html">Simulation</a></li>
<li><a href="What_Will_Happen.html">Impact Analysis</a></li>
<li><a href="eligius.html">Eligius Mission</a></li>
<li><a href="team.html">OUR TEAM</a></li>


</ul>
</div>
</div>
</nav>

<main id="main-content">
<div class="presentation-text-container">
<h3 class="glitch" data-text="IMPACT ANALYSIS" style="font-size:50px;">Impact Analysis</h3>

<form id="impactForm">
<h4 style="margin-top:0;">Impact Parameters</h4>

<div class="form-row">
<div class="form-field-group">
<label for="meteorite-select">Select Meteorite (optional):</label>
<select id="meteorite-select">
    <option value="">-- Sélectionner un événement --</option>
    <option value="2008 TC3|1000000|12380|21.087|30.538">2008 TC3</option>
    <option value="2018 LA|1000|17000|34.5|-116.5">2018 LA</option>
    <option value="Chelyabinsk|13000000|19000|54.8|61.1">Chelyabinsk</option>
    <option value="Tunguska (1908)|10000000000|27000|60.9|101.9">Tunguska (1908)</option>
    <option value="PDC25 (hypothetical)|1000000000|15200|45.0|-75.0">PDC25</option>
    <option value="2013 TX68|1000000|15000|40.0|-80.0">2013 TX68</option>
    <option value="2004 FH|500000|10000|30.0|-60.0">2004 FH</option>
    <option value="2020 QG|1000|8000|-30.0|150.0">2020 QG</option>
    <option value="2019 MO|100000|12000|60.0|-120.0">2019 MO</option>
    <option value="2021 GW|10000|9000|-45.0|90.0">2021 GW</option>
    <option value="Ingalls, NC (2024)|100|12000|35.8|-81.8">Ingalls, NC (2024)</option>
    <option value="Amo, IN (2024)|100|11000|39.8|-86.9">Amo, IN (2024)</option>
    <option value="Pontiac, KS (2024)|100|10000|37.6|-97.3">Pontiac, KS (2024)</option>
    <option value="Edison, NJ (2024)|100|13000|40.5|-74.3">Edison, NJ (2024)</option>
    <option value="Clanton Well, AZ (2024)|100|14000|33.6|-113.2">Clanton Well, AZ (2024)</option>
    <option value="Naples, FL (2024)|100|15000|26.2|-81.8">Naples, FL (2024)</option>
    <option value="Gunsight Butte, AZ (2023)|100|16000|33.5|-113.5">Gunsight Butte, AZ (2023)</option>
    <option value="Kingsport, TN (2023)|100|17000|36.5|-82.6">Kingsport, TN (2023)</option>
    <option value="Hopewell, NJ (2023)|100|18000|40.2|-74.5">Hopewell, NJ (2023)</option>
    <option value="Colorado Debris Deorbit (2023)|100|19000|39.0|-104.9">Colorado Debris Deorbit (2023)</option>
    <option value="Waite, ME (2023)|100|20000|44.5|-68.2">Waite, ME (2023)</option>
    <option value="El Sauz, TX (2023)|100|21000|26.2|-98.2">El Sauz, TX (2023)</option>
    <option value="Muskogee, OK (2023)|100|22000|35.7|-95.3">Muskogee, OK (2023)</option>
    <option value="Hopewell, NJ (2023)|100|23000|40.2|-74.5">Hopewell, NJ (2023)</option>
    <option value="Colorado Debris Deorbit (2023)|100|24000|39.0|-104.9">Colorado Debris Deorbit (2023)</option>
    <option value="Waite, ME (2023)|100|25000|44.5|-68.2">Waite, ME (2023)</option>
    <option value="El Sauz, TX (2023)|100|26000|26.2|-98.2">El Sauz, TX (2023)</option>
    <option value="Muskogee, OK (2023)|100|27000|35.7|-95.3">Muskogee, OK (2023)</option>
    <option value="Hopewell, NJ (2023)|100|28000|40.2|-74.5">Hopewell, NJ (2023)</option>
    <option value="Colorado Debris Deorbit (2023)|100|29000|39.0|-104.9">Colorado Debris Deorbit (2023)</option>
    <option value="Waite, ME (2023)|100|30000|44.5|-68.2">Waite, ME (2023)</option>
    <option value="Ensisheim|1270|10000|47.9|7.3">Ensisheim (1492)</option>
    <option value="L'Aigle|1803|10000|48.7|0.8">L'Aigle (1803)</option>
    <option value="Lancé|1872|10000|48.5|2.5">Lancé (1872)</option>
    <option value="Le Teilleul|1845|10000|48.5|1.5">Le Teilleul (1845)</option>
    <option value="Le Pressoir|1845|10000|48.5|1.5">Le Pressoir (1845)</option>
    <option value="Leighlinbridge|1999|10000|52.7|-6.9">Leighlinbridge (1999)</option>
    <option value="Långhalsen|1947|10000|60.0|17.0">Långhalsen (1947)</option>
    <option value="Lavrentievka|1938|10000|53.5|42.0">Lavrentievka (1938)</option>
    <option value="Laochenzhen|1987|10000|30.0|112.0">Laochenzhen (1987)</option>
    <option value="Leedey|1943|10000|35.5|-98.0">Leedey (1943)</option>
    <option value="Leeuwfontein|1912|10000|-26.0|28.0">Leeuwfontein (1912)</option>
    <option value="Lalitpur|1887|10000|24.0|79.0">Lalitpur (1887)</option>
    <option value="Lakangaon|1910|10000|21.0|75.0">Lakangaon (1910)</option>
    <option value="Lanzon|1897|10000|43.0|5.0">Lanzon (1897)</option>
    <option value="Laochenzhen|1987|10000|30.0|112.0">Laochenzhen (1987)</option>
    <option value="Leighton|1907|10000|39.0|-94.0">Leighton (1907)</option>
    <option value="Leonovka|1900|10000|48.0|39.0">Leonovka (1900)</option>
    <option value="Les Ormes|1857|10000|47.0|2.0">Les Ormes (1857)</option>
    <option value="Lesves|1896|10000|50.0|4.0">Lesves (1896)</option>
    <option value="Långhalsen|1947|10000|60.0|17.0">Långhalsen (1947)</option>
</select>

</div>
</div>

<div class="form-row">
<div class="form-field-group">
<label for="impact-weight">Object Mass (kg):</label>
<input type="number" id="impact-weight" name="weight" placeholder="Ex: 10000" required>
</div>
<div class="form-field-group">
<label for="impact-speed">Impact Speed (m/s):</label>
<input type="number" id="impact-speed" name="speed" placeholder="Ex: 20000" required>
</div>
</div>

<div class="form-field-group">
<label for="richter-scale">Estimated Richter Magnitude:</label>
<input type="text" id="richter-scale" name="richter" readonly placeholder="Will be calculated automatically">
</div>

<h4>Impact Coordinates</h4>
<div class="form-row">
<div class="form-field-group">
<label for="latitude">Latitude:</label>
<input type="text" id="latitude" name="latitude" readonly placeholder="Click on the map to set the latitude" required>
</div>
<div class="form-field-group">
<label for="longitude">Longitude:</label>
<input type="text" id="longitude" name="longitude" readonly placeholder="Click on the map to set the longitude" required>
</div>
</div>

<div id="map"></div>
<input type="submit" value="CALCULATE IMPACT" class="submit-button">
</form>
</div>
</main>

<div class="footer-bottom" style="padding-top:15px;padding-bottom:20px;">
<p>&copy; 2025 - NASA INTERNATIONAL SPACE APPS CHALLENGE</p>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
const key = "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";

// ==================================================
// SCRIPT POUR LE MODAL D'INTRODUCTION (Ajouté)
// ==================================================
const introModal = document.getElementById('intro-slide-modal');
const modalContentWrapper = document.querySelector('.modal-content-wrapper');

// Fonction pour fermer la slide d'introduction
function closeIntroSlide() {
    const contentAnimationDuration = 600; 
    
    // 1. Déclenche l'apparition progressive du contenu principal (1 seconde de fondu)
    document.body.classList.add('content-visible');

    // 2. Déclenchez l'animation de fermeture du modal
    modalContentWrapper.classList.remove('loaded');
    introModal.classList.add('closing');
    introModal.classList.remove('show');

    // 3. Masquez complètement le modal
    setTimeout(() => {
        introModal.style.visibility = 'hidden';
        introModal.classList.remove('closing');
        
        // Réinitialiser la position du contenu du modal
        modalContentWrapper.style.transition = 'none';
        modalContentWrapper.style.transform = 'translateX(-100%)';
        modalContentWrapper.style.opacity = '0';
        
        // 4. IMPORTANT : Invalider la taille de la carte après la fermeture du modal pour qu'elle s'affiche correctement
        if (typeof map !== 'undefined') {
            map.invalidateSize();
        }

    }, contentAnimationDuration);
}


// --- Leaflet Map Setup (Initialisation Décalée) ---
const initialLat = 40.7128, initialLng = -74.0060, initialZoom = 3;
let marker = null;
let map; // Déclarer la carte globalement
// L'initialisation réelle de la carte sera faite dans le DOMContentLoaded

function initMap() {
    map = L.map('map').setView([initialLat, initialLng], initialZoom);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom:19, attribution:'&copy; OpenStreetMap contributors', crossOrigin: ''}).addTo(map);

    // --- Initialize main marker ---
    marker = L.marker([initialLat, initialLng], {draggable:true}).addTo(map);
    updateFormFields(initialLat, initialLng);
    marker.on('dragend', ()=> {
        const pos = marker.getLatLng();
        updateFormFields(pos.lat, pos.lng);
    });

    // --- Map markers & two-way link ---
    const markersMap = {};
    meteorites.forEach(m => {
        const mMarker = L.marker([m.lat, m.lng]).addTo(map);
        mMarker.bindPopup(`<b>${m.name}</b><br>Mass: ${m.mass} kg<br>Speed: ${m.speed} m/s`);
        mMarker.on('click', ()=> {
            document.getElementById("meteorite-select").value = `${m.name}|${m.mass}|${m.speed}|${m.lat}|${m.lng}`;
            document.getElementById("impact-weight").value = m.mass;
            document.getElementById("impact-speed").value = m.speed;
            updateFormFields(m.lat, m.lng);
            updateRichterField();
            map.setView([m.lat, m.lng],5);
            if(marker) map.removeLayer(marker);
            marker = L.marker([m.lat, m.lng],{draggable:true}).addTo(map);
            marker.on('dragend', ()=> {
                const pos = marker.getLatLng();
                updateFormFields(pos.lat,pos.lng);
            });
        });
        markersMap[m.name] = mMarker;
    });

    // --- Click listener on map ---
    map.on('click', function(e) {
        // 1. Remove the old draggable marker if it exists
        if (marker) {
            map.removeLayer(marker);
        }

        // 2. Create a new draggable marker at the click location (e.latlng)
        marker = L.marker(e.latlng, {draggable: true}).addTo(map);

        // 3. Update the form fields with the new coordinates
        updateFormFields(e.latlng.lat, e.latlng.lng);

        // 4. Re-attach the dragend listener so it keeps updating the form
        marker.on('dragend', () => {
            const pos = marker.getLatLng();
            updateFormFields(pos.lat, pos.lng);
        });

        // 5. Clear the meteorite selection (optional but recommended for clarity)
        document.getElementById("meteorite-select").value = "";
        document.getElementById("impact-weight").value = "";
        document.getElementById("impact-speed").value = "";
        updateRichterField();
    });
}


function updateFormFields(lat,lng){
    document.getElementById("latitude").value = lat.toFixed(6);
    document.getElementById("longitude").value = lng.toFixed(6);
}


function calculateRichterScale(mass,speed){
    if(mass<=0||speed<=0) return null;
    const energy = 0.5 * mass * Math.pow(speed,2);
    const magnitude = (2/3) * Math.log10(energy) - 3.2;
    return magnitude.toFixed(2);
}

function updateRichterField(){
    const mass = parseFloat(document.getElementById("impact-weight").value);
    const speed = parseFloat(document.getElementById("impact-speed").value);
    const output = document.getElementById("richter-scale");
    if(!isNaN(mass) && !isNaN(speed) && mass>0 && speed>0){
        const M = calculateRichterScale(mass,speed);
        output.value = M ? `${M} (approx.)` : "";
    } else { output.value=""; }
}

// --- Meteorites Data ---
const meteoriteSelect = document.getElementById("meteorite-select");
const meteorites = Array.from(meteoriteSelect.options)
    .filter(opt => opt.value)
    .map(opt => {
        const [name, mass, speed, lat, lng] = opt.value.split('|');
        return { name, mass: parseFloat(mass), speed: parseFloat(speed), lat: parseFloat(lat), lng: parseFloat(lng) };
    });

// --- OpenRouter API call ---
async function callOpenRouter(prompt){
    const response=await fetch("https://openrouter.ai/api/v1/chat/completions",{
        method:"POST",
        headers:{
            "Authorization":`Bearer ${key}`,
            "Content-Type":"application/json"
        },
        body:JSON.stringify({
            model:"openai/gpt-4o-mini",
            messages:[
                { role:"system", content:"You are an expert in astrophysics. Simply explain the consequences of a meteorite on Earth."},
                { role:"user", content: prompt }
            ]
        })
    });
    const data=await response.json();
    return data.choices?.[0]?.message?.content || "Erreur : aucune réponse reçue";
}


document.addEventListener('DOMContentLoaded', () => {
    
    // 1. DÉCLENCHEMENT DU MODAL D'INTRODUCTION
    introModal.classList.add('show');
    
    setTimeout(() => {
        modalContentWrapper.classList.add('loaded');
    }, 750);

    // 2. Initialisation des événements de formulaire
    document.getElementById("impact-weight").addEventListener("input",updateRichterField);
    document.getElementById("impact-speed").addEventListener("input",updateRichterField);

    // --- Update map when selecting from list ---
    document.getElementById("meteorite-select").addEventListener("change", function(){
        const value = this.value;
        if(value){
            const [name,mass,speed,lat,lng] = value.split('|');
            document.getElementById("impact-weight").value = mass;
            document.getElementById("impact-speed").value = speed;
            updateFormFields(parseFloat(lat), parseFloat(lng));
            updateRichterField();
            
            if (map) { // Vérifier si la carte est initialisée
                map.setView([parseFloat(lat), parseFloat(lng)],5);
                if(marker) map.removeLayer(marker);
                marker = L.marker([parseFloat(lat), parseFloat(lng)],{draggable:true}).addTo(map);
                marker.on('dragend', ()=> {
                    const pos = marker.getLatLng();
                    updateFormFields(pos.lat,pos.lng);
                });
            }
        }
    });

    // 3. Initialisation de la carte (doit être après la déclaration pour le DOMContentLoaded)
    initMap(); 

    // --- Form submission ---
    document.getElementById('impactForm').addEventListener('submit', async function(e){
        e.preventDefault();
        const weight = document.getElementById('impact-weight').value;
        const speed = document.getElementById('impact-speed').value;
        const lat = document.getElementById('latitude').value;
        const lng = document.getElementById('longitude').value;
        const magnitude = document.getElementById('richter-scale').value;
        if(!lat || !lng) { console.error("Location not defined."); return; }

        const prompt = `
        You are an astrophysics expert

        A meteorite weighing ${weight} kg has just hit the Earth with a speed of: ${speed} m/s. The meteorite's magnitude on the Richter scale is: ${magnitude}.
        It hit the Earth at [Latitude:${lat}, Longitude:${lng}].

        Explain in a short text understandable by everyone the consequences of the impact for Earth and human civilization, considering the power of the impact and the impact location

        You must answer with four paragraphs explaining:
            1) The power of the impact: how many tons of TNT this is equivalent to, what is the size of the impact, what it destroyed

            2) The impact on this precise area: the uniqueness of this area, what country it's in, cite the famous monuments of this place that would be destroyed, estimate the number of dead

            3) The impact on humanity and the Earth: what happens to the entire Earth and humanity and if it's serious for us, say if we would survive or if everyone would die

            4) Say if a intervention is necessary for destroy the meteorite before the collision on a scale on 1 of 10 (1 not necessary, 10 we have to destroy it)

        You must put a # between each paragraph
        `;

        let messageBox = document.getElementById('impact-result-box');
        if(!messageBox){
            messageBox = document.createElement('div');
            messageBox.id = 'impact-result-box';
            messageBox.style.textAlign = 'left';
            messageBox.style.whiteSpace = 'pre-wrap';
            messageBox.style.backgroundColor = 'rgba(0, 191, 255, 0.2)';
            messageBox.style.color = '#FFFFFF';
            messageBox.style.paddingLeft = '25px';
            document.getElementById('impactForm').after(messageBox);
        }

        messageBox.innerHTML = "Calculation in progress...";
        messageBox.classList.add('show');

        try{
            answer=await callOpenRouter(prompt);
            messageBox.innerHTML = answer.replace(/#/g,'<br><br>');
        }catch(e){
            messageBox.innerHTML = "Erreur lors de l'appel à l'API.";
            console.error(e);
        }
    });

});
</script>
</body>
</html>